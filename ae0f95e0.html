<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta name="keywords" content="Spring MVC, KawYang">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Spring MVC | KawYang</title>
    <link rel="icon" type="image/jpeg" href="https://gitee.com/KawYang/image/raw/master/img/photo.jpg">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>




<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <span class="logo-span">KawYang</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <div class="logo-name">KawYang</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
    <link rel="stylesheet" href="/js/prism/prism.css">

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/9.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Spring MVC</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Spring-MVC/">
                                <span class="chip bg-color">Spring MVC</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Spring/" class="post-category">
                                Spring
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-07-28
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    10.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    56 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv-1" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<p><code>Spring MVC</code> <code>如何使用？</code> <code>Spring MVC REST</code> <code>Spring MVC 文件上传下载</code> <code>Spring MVC 表单标签库</code> <code>Spring MVC 数据校验</code></p>
</blockquote>
<h3 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h3><p>Spring MVC 是目前主流的实现 MVC 设计模式的企业级开发框架，Spring 框架的一个子模块，无需整合，开发起来更加便捷。</p>
<h4 id="什么是-MVC-设计模式？"><a href="#什么是-MVC-设计模式？" class="headerlink" title="什么是 MVC 设计模式？"></a>什么是 MVC 设计模式？</h4><p>将应用程序分为 Controller、Model、View 三层，Controller 接收客户端请求，调用 Model 生成业务数据，传递给 View。</p>
<p>Spring MVC 就是对这套流程的封装，屏蔽了很多底层代码，开放出接口，让开发者可以更加轻松、便捷地完成基于 MVC 模式的 Web 开发。</p>
<h4 id="Spring-MVC-的核心组件"><a href="#Spring-MVC-的核心组件" class="headerlink" title="Spring MVC 的核心组件"></a>Spring MVC 的核心组件</h4><ul>
<li>DispatcherServlet：前置控制器，是整个流程控制的核心，控制其他组件的执行，进行统一调度，降低组件之间的耦合性，相当于总指挥。</li>
<li>Handler：处理器，完成具体的业务逻辑，相当于 Servlet 或 Action。</li>
<li>HandlerMapping：DispatcherServlet 接收到请求之后，通过 HandlerMapping 将不同的请求映射到不同的 Handler。</li>
<li>HandlerInterceptor：处理器拦截器，是一个接口，如果需要完成一些拦截处理，可以实现该接口。</li>
<li>HandlerExecutionChain：处理器执行链，包括两部分内容：Handler 和 HandlerInterceptor（系统会有一个默认的 HandlerInterceptor，如果需要额外设置拦截，可以添加拦截器）。</li>
<li>HandlerAdapter：处理器适配器，Handler 执行业务方法之前，需要进行一系列的操作，包括表单数据的验证、数据类型的转换、将表单数据封装到 JavaBean 等，这些操作都是由 HandlerApater 来完成，开发者只需将注意力集中业务逻辑的处理上，DispatcherServlet 通过 HandlerAdapter 执行不同的 Handler。</li>
<li>ModelAndView：装载了模型数据和视图信息，作为 Handler 的处理结果，返回给 DispatcherServlet。</li>
<li>ViewResolver：视图解析器，DispatcheServlet 通过它将逻辑视图解析为物理视图，最终将渲染结果响应给客户端。</li>
</ul>
<h4 id="Spring-MVC-的工作流程"><a href="#Spring-MVC-的工作流程" class="headerlink" title="Spring MVC 的工作流程"></a>Spring MVC 的工作流程</h4><ul>
<li>客户端请求被 DisptacherServlet 接收。</li>
<li>根据 HandlerMapping 映射到 Handler。</li>
<li>生成 Handler 和 HandlerInterceptor。</li>
<li>Handler 和 HandlerInterceptor 以 HandlerExecutionChain 的形式一并返回给 DisptacherServlet。</li>
<li>DispatcherServlet 通过 HandlerAdapter 调用 Handler 的方法完成业务逻辑处理。</li>
<li>Handler 返回一个 ModelAndView 给 DispatcherServlet。</li>
<li>DispatcherServlet 将获取的 ModelAndView 对象传给 ViewResolver 视图解析器，将逻辑视图解析为物理视图 View。</li>
<li>ViewResovler 返回一个 View 给 DispatcherServlet。</li>
<li>DispatcherServlet 根据 View 进行视图渲染（将模型数据 Model 填充到视图 View 中）。</li>
<li>DispatcherServlet 将渲染后的结果响应给客户端。</li>
</ul>
<p><img src="/Users/southwind/Library/Application Support/typora-user-images/image-20190313111136254.png" alt="image-20190313111136254"></p>
<p>Spring MVC 流程非常复杂，实际开发中很简单，因为大部分的组件不需要开发者创建、管理，只需要通过配置文件的方式完成配置即可，真正需要开发者进行处理的只有 Handler 、View。</p>
<h4 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h4><ul>
<li>创建 Maven 工程，pom.xml</li>
</ul>
<pre><code class="lang-xml">&lt;dependencies&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
        &lt;version&gt;5.0.11.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
</code></pre>
<ul>
<li>在 web.xml 中配置 DispatcherServlet。</li>
</ul>
<pre><code class="lang-xml">&lt;!DOCTYPE web-app PUBLIC
 &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;
 &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;

&lt;web-app&gt;
  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;

  &lt;servlet&gt;
    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</code></pre>
<ul>
<li>springmvc.xml</li>
</ul>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd&quot;&gt;

    &lt;!-- 自动扫描 --&gt;
    &lt;context:component-scan base-package=&quot;com.southwind&quot;&gt;&lt;/context:component-scan&gt;

    &lt;!-- 配置视图解析器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<ul>
<li>创建 Handler</li>
</ul>
<pre><code class="lang-java">package com.southwind.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HelloHandler &#123;

    @RequestMapping(&quot;/index&quot;)
    public String index()&#123;
        System.out.println(&quot;执行了index...&quot;);
        return &quot;index&quot;;
    &#125;
&#125;
</code></pre>
<h3 id="Spring-MVC-注解"><a href="#Spring-MVC-注解" class="headerlink" title="Spring MVC 注解"></a>Spring MVC 注解</h3><ul>
<li>@RequestMapping </li>
</ul>
<p>Spring MVC 通过 @RequestMapping 注解将 URL 请求与业务方法进行映射，在 Handler 的类定义处以及方法定义处都可以添加 @RequestMapping ，在类定义处添加，相当于客户端多了一层访问路径。</p>
<ul>
<li>@Controller</li>
</ul>
<p>@Controller 在类定义处添加，将该类交个 IoC 容器来管理（结合 springmvc.xml 的自动扫描配置使用），同时使其成为一个控制器，可以接收客户端请求。</p>
<pre><code class="lang-java">package com.southwind.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping(&quot;/hello&quot;)
public class HelloHandler &#123;

    @RequestMapping(&quot;/index&quot;)
    public String index()&#123;
        System.out.println(&quot;执行了index...&quot;);
        return &quot;index&quot;;
    &#125;
&#125;
</code></pre>
<ul>
<li>@RequestMapping 相关参数</li>
</ul>
<p>1、value：指定 URL 请求的实际地址，是 @RequestMapping 的默认值。</p>
<pre><code class="lang-java">@RequestMapping(&quot;/index&quot;)
public String index()&#123;
    System.out.println(&quot;执行了index...&quot;);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>等于</p>
<pre><code class="lang-java">@RequestMapping(value=&quot;/index&quot;)
public String index()&#123;
    System.out.println(&quot;执行了index...&quot;);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>2、method：指定请求的 method 类型，GET、POST、PUT、DELET。</p>
<pre><code class="lang-java">@RequestMapping(value = &quot;/index&quot;,method = RequestMethod.GET)
public String index()&#123;
    System.out.println(&quot;执行了index...&quot;);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>上述代码表示 index 方法只能接收 GET 请求。</p>
<p>3、params：指定请求中必须包含某些参数，否则无法调用该方法。</p>
<pre><code class="lang-java">@RequestMapping(value = &quot;/index&quot;,method = RequestMethod.GET,params = &#123;&quot;name&quot;,&quot;id=10&quot;&#125;)
public String index()&#123;
    System.out.println(&quot;执行了index...&quot;);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>上述代码表示请求中必须包含 name 和 id 两个参数，同时 id 的值必须是 10。</p>
<p>关于参数绑定，在形参列表中通过添加 @RequestParam 注解完成 HTTP 请求参数与业务方法形参的映射。</p>
<pre><code class="lang-java">@RequestMapping(value = &quot;/index&quot;,method = RequestMethod.GET,params = &#123;&quot;name&quot;,&quot;id=10&quot;&#125;)
public String index(@RequestParam(&quot;name&quot;) String str,@RequestParam(&quot;id&quot;) int age)&#123;
    System.out.println(str);
    System.out.println(age);
    System.out.println(&quot;执行了index...&quot;);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>上述代码表示将请求的参数 name 和 id 分别赋给了形参 str 和 age ，同时自动完成了数据类型转换，将 “10” 转为了 int 类型的 10，再赋给 age，这些工作都是由 HandlerAdapter 来完成的。</p>
<p>Spring MVC 也支持 RESTful 风格的 URL。</p>
<p>传统类型：<a target="_blank" rel="noopener" href="http://localhost:8080/hello/index?name=zhangsan&amp;id=10">http://localhost:8080/hello/index?name=zhangsan&amp;id=10</a></p>
<p>REST：<a target="_blank" rel="noopener" href="http://localhost:8080/hello/index/zhangsan/10">http://localhost:8080/hello/index/zhangsan/10</a></p>
<pre><code class="lang-java">@RequestMapping(&quot;/rest/&#123;name&#125;/&#123;id&#125;&quot;)
public String rest(@PathVariable(&quot;name&quot;) String name,@PathVariable(&quot;id&quot;) int id)&#123;
    System.out.println(name);
    System.out.println(id);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>通过 @PathVariable 注解完成请求参数与形参的映射。</p>
<ul>
<li>映射 Cookie</li>
</ul>
<p>Spring MVC 通过映射可以直接在业务方法中获取 Cookie 的值。</p>
<pre><code class="lang-java">@RequestMapping(&quot;/cookie&quot;)
public String cookie(@CookieValue(value = &quot;JSESSIONID&quot;) String sessionId)&#123;
    System.out.println(sessionId);
    return &quot;index&quot;;
&#125;
</code></pre>
<ul>
<li>使用 JavaBean 绑定参数</li>
</ul>
<p>Spring MVC 会根据请求参数名和 JavaBean 属性名进行自动匹配，自动为对象填充属性值，同时支持及联属性。</p>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;

@Data
public class Address &#123;
    private String value;
&#125;
</code></pre>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;

@Data
public class User &#123;
    private long id;
    private String name;
    private Address address;
&#125;
</code></pre>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-13
  Time: 15:33
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/hello/save&quot; method=&quot;post&quot;&gt;
        用户id：&lt;input type=&quot;text&quot; name=&quot;id&quot;/&gt;&lt;br/&gt;
        用户名：&lt;input type=&quot;text&quot; name=&quot;name&quot;/&gt;&lt;br/&gt;
        用户地址：&lt;input type=&quot;text&quot; name=&quot;address.value&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;注册&quot;/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="lang-java">@RequestMapping(value = &quot;/save&quot;,method = RequestMethod.POST)
public String save(User user)&#123;
    System.out.println(user);
    return &quot;index&quot;;
&#125;
</code></pre>
<p>如果出现中文乱码问题，只需在 web.xml 添加 Spring MVC 自带的过滤器即可。</p>
<pre><code class="lang-xml">&lt;filter&gt;
    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;encoding&lt;/param-name&gt;
        &lt;param-value&gt;UTF-8&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre>
<ul>
<li>JSP 页面的转发和重定向：</li>
</ul>
<p>Spring MVC 默认是以转发的形式响应 JSP。</p>
<p>1、转发</p>
<pre><code class="lang-java">@RequestMapping(&quot;/forward&quot;)
public String forward()&#123;
    return &quot;forward:/index.jsp&quot;;
    //        return &quot;index&quot;;
&#125;
</code></pre>
<p>2、重定向</p>
<pre><code class="lang-java">@RequestMapping(&quot;/redirect&quot;)
public String redirect()&#123;
    return &quot;redirect:/index.jsp&quot;;
&#125;
</code></pre>
<h3 id="Spring-MVC-数据绑定"><a href="#Spring-MVC-数据绑定" class="headerlink" title="Spring MVC 数据绑定"></a>Spring MVC 数据绑定</h3><p>数据绑定：在后端的业务方法中直接获取客户端 HTTP 请求中的参数，将请求参数映射到业务方法的形参中，Spring MVC 中数据绑定的工作是由 HandlerAdapter 来完成的。</p>
<ul>
<li>基本数据类型</li>
</ul>
<pre><code class="lang-java">@RequestMapping(&quot;/baseType&quot;)
@ResponseBody
public String baseType(int id)&#123;
    return id+&quot;&quot;;
&#125;
</code></pre>
<p>@ResponseBody 表示 Spring MVC 会直接将业务方法的返回值响应给客户端，如果不加 @ResponseBody 注解，Spring MVC 会将业务方法的放回值传递给 DispatcherServlet，再由 DisptacherServlet 调用 ViewResolver 对返回值进行解析，映射到一个 JSP 资源。</p>
<ul>
<li>包装类</li>
</ul>
<pre><code class="lang-java">@RequestMapping(&quot;/packageType&quot;)
@ResponseBody
public String packageType(@RequestParam(value = &quot;num&quot;,required = false,defaultValue = &quot;0&quot;) Integer id)&#123;
    return id+&quot;&quot;;
&#125;
</code></pre>
<p>包装类可以接收 null，当 HTTP 请求没有参数时，使用包装类定义形参的数据类型，程序不会抛出异常。</p>
<p>@RequestParam</p>
<p>value = “num”：将 HTTP 请求中名为 num 的参数赋给形参 id。</p>
<p>requried：设置 num 是否为必填项，true 表示必填，false 表示非必填，可省略。</p>
<p>defaultValue = “0”：如果 HTTP 请求中没有 num 参数，默认值为0.</p>
<ul>
<li>数组</li>
</ul>
<pre><code class="lang-java">@RestController
@RequestMapping(&quot;/data&quot;)
public class DataBindHandler &#123;
    @RequestMapping(&quot;/array&quot;)
    public String array(String[] name)&#123;
        String str = Arrays.toString(name);
        return str;
    &#125;
&#125;
</code></pre>
<p>@RestController 表示该控制器会直接将业务方法的返回值响应给客户端，不进行视图解析。</p>
<p>@Controller 表示该控制器的每一个业务方法的返回值都会交给视图解析器进行解析，如果只需要将数据响应给客户端，而不需要进行视图解析，则需要在对应的业务方法定义处添加 @ResponseBody。</p>
<pre><code class="lang-java">@RestController
@RequestMapping(&quot;/data&quot;)
public class DataBindHandler &#123;
    @RequestMapping(&quot;/array&quot;)
    public String array(String[] name)&#123;
        String str = Arrays.toString(name);
        return str;
    &#125;
&#125;
</code></pre>
<p>等同于</p>
<pre><code class="lang-java">@Controller
@RequestMapping(&quot;/data&quot;)
public class DataBindHandler &#123;
    @RequestMapping(&quot;/array&quot;)
    @ResponseBody
    public String array(String[] name)&#123;
        String str = Arrays.toString(name);
        return str;
    &#125;
&#125;
</code></pre>
<ul>
<li>List</li>
</ul>
<p>Spring MVC 不支持 List 类型的直接转换，需要对 List 集合进行包装。</p>
<p>集合封装类</p>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;

import java.util.List;

@Data
public class UserList &#123;
    private List&lt;User&gt; users;
&#125;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 09:12
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/data/list&quot; method=&quot;post&quot;&gt;
        用户1编号：&lt;input type=&quot;text&quot; name=&quot;users[0].id&quot;/&gt;&lt;br/&gt;
        用户1名称：&lt;input type=&quot;text&quot; name=&quot;users[0].name&quot;/&gt;&lt;br/&gt;
        用户2编号：&lt;input type=&quot;text&quot; name=&quot;users[1].id&quot;/&gt;&lt;br/&gt;
        用户2名称：&lt;input type=&quot;text&quot; name=&quot;users[1].name&quot;/&gt;&lt;br/&gt;
        用户3编号：&lt;input type=&quot;text&quot; name=&quot;users[2].id&quot;/&gt;&lt;br/&gt;
        用户3名称：&lt;input type=&quot;text&quot; name=&quot;users[2].name&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>业务方法</p>
<pre><code class="lang-java">@RequestMapping(&quot;/list&quot;)
public String list(UserList userList)&#123;
    StringBuffer str = new StringBuffer();
    for(User user:userList.getUsers())&#123;
        str.append(user);
    &#125;
    return str.toString();
&#125;
</code></pre>
<p>处理 @ResponseBody 中文乱码，在 springmvc.xml 中配置消息转换器。</p>
<pre><code class="lang-xml">&lt;mvc:annotation-driven&gt;
    &lt;!-- 消息转换器 --&gt;
    &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;
        &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;
            &lt;property name=&quot;supportedMediaTypes&quot; value=&quot;text/html;charset=UTF-8&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/mvc:message-converters&gt;
&lt;/mvc:annotation-driven&gt;
</code></pre>
<ul>
<li>Map</li>
</ul>
<p>自定义封装类</p>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;

import java.util.Map;

@Data
public class UserMap &#123;
    private Map&lt;String,User&gt; users;
&#125;
</code></pre>
<p>业务方法</p>
<pre><code class="lang-java">@RequestMapping(&quot;/map&quot;)
public String map(UserMap userMap)&#123;
    StringBuffer str = new StringBuffer();
    for(String key:userMap.getUsers().keySet())&#123;
        User user = userMap.getUsers().get(key);
        str.append(user);
    &#125;
    return str.toString();
&#125;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 09:12
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/data/map&quot; method=&quot;post&quot;&gt;
        用户1编号：&lt;input type=&quot;text&quot; name=&quot;users[&#39;a&#39;].id&quot;/&gt;&lt;br/&gt;
        用户1名称：&lt;input type=&quot;text&quot; name=&quot;users[&#39;a&#39;].name&quot;/&gt;&lt;br/&gt;
        用户2编号：&lt;input type=&quot;text&quot; name=&quot;users[&#39;b&#39;].id&quot;/&gt;&lt;br/&gt;
        用户2名称：&lt;input type=&quot;text&quot; name=&quot;users[&#39;b&#39;].name&quot;/&gt;&lt;br/&gt;
        用户3编号：&lt;input type=&quot;text&quot; name=&quot;users[&#39;c&#39;].id&quot;/&gt;&lt;br/&gt;
        用户3名称：&lt;input type=&quot;text&quot; name=&quot;users[&#39;c&#39;].name&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>JSON</li>
</ul>
<p>客户端发生 JSON 格式的数据，直接通过 Spring MVC 绑定到业务方法的形参中。</p>
<p>处理 Spring MVC 无法加载静态资源，在 web.xml 中添加配置即可。</p>
<pre><code class="lang-xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 10:35
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        $(function()&#123;
           var user = &#123;
               &quot;id&quot;:1,
               &quot;name&quot;:&quot;张三&quot;
           &#125;;
           $.ajax(&#123;
               url:&quot;/data/json&quot;,
               data:JSON.stringify(user),
               type:&quot;POST&quot;,
               contentType:&quot;application/json;charset=UTF-8&quot;,
               dataType:&quot;JSON&quot;,
               success:function(data)&#123;
                   alter(data.id+&quot;---&quot;+data.name);
               &#125;
           &#125;)
        &#125;);
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>业务方法</p>
<pre><code class="lang-java">@RequestMapping(&quot;/json&quot;)
public User json(@RequestBody User user)&#123;
    System.out.println(user);
    user.setId(6);
    user.setName(&quot;张六&quot;);
    return user;
&#125;
</code></pre>
<p>Spring MVC 中的 JSON 和 JavaBean 的转换需要借助于 fastjson，pom.xml 引入相关依赖。</p>
<pre><code class="lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
    &lt;version&gt;1.2.32&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>springmvc.xml 添加 fastjson 配置。</p>
<pre><code class="lang-xml">&lt;mvc:annotation-driven&gt;
    &lt;!-- 消息转换器 --&gt;
    &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;
        &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;
            &lt;property name=&quot;supportedMediaTypes&quot; value=&quot;text/html;charset=UTF-8&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 配置fastjson --&gt;
        &lt;bean class=&quot;com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:message-converters&gt;
&lt;/mvc:annotation-driven&gt;
</code></pre>
<h3 id="Spring-MVC-模型数据解析"><a href="#Spring-MVC-模型数据解析" class="headerlink" title="Spring MVC 模型数据解析"></a>Spring MVC 模型数据解析</h3><p>JSP 四大作用域对应的内置对象：pageContext、request、session、application。</p>
<p>模型数据的绑定是由 ViewResolver 来完成的，实际开发中，我们需要先添加模型数据，再交给 ViewResolver 来绑定。</p>
<p>Spring MVC 提供了以下几种方式添加模型数据：</p>
<ul>
<li>Map</li>
<li>Model</li>
<li>ModelAndView</li>
<li>@SessionAttribute</li>
<li>@ModelAttribute</li>
</ul>
<blockquote>
<p>将模式数据绑定到 request 对象。</p>
</blockquote>
<p>1、Map</p>
<pre><code class="lang-java">@RequestMapping(&quot;/map&quot;)
public String map(Map&lt;String,User&gt; map)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    map.put(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 11:36
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    $&#123;requestScope.user&#125;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>2、Model</p>
<pre><code class="lang-java">@RequestMapping(&quot;/model&quot;)
public String model(Model model)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    model.addAttribute(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;
</code></pre>
<p>3、ModelAndView</p>
<pre><code class="lang-java">@RequestMapping(&quot;/modelAndView&quot;)
public ModelAndView modelAndView()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    ModelAndView modelAndView = new ModelAndView();
    modelAndView.addObject(&quot;user&quot;,user);
    modelAndView.setViewName(&quot;view&quot;);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView2&quot;)
public ModelAndView modelAndView2()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    ModelAndView modelAndView = new ModelAndView();
    modelAndView.addObject(&quot;user&quot;,user);
    View view = new InternalResourceView(&quot;/view.jsp&quot;);
    modelAndView.setView(view);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView3&quot;)
public ModelAndView modelAndView3()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    ModelAndView modelAndView = new ModelAndView(&quot;view&quot;);
    modelAndView.addObject(&quot;user&quot;,user);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView4&quot;)
public ModelAndView modelAndView4()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    View view = new InternalResourceView(&quot;/view.jsp&quot;);
    ModelAndView modelAndView = new ModelAndView(view);
    modelAndView.addObject(&quot;user&quot;,user);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView5&quot;)
public ModelAndView modelAndView5()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    Map&lt;String,User&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;user&quot;,user);
    ModelAndView modelAndView = new ModelAndView(&quot;view&quot;,map);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView6&quot;)
public ModelAndView modelAndView6()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    Map&lt;String,User&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;user&quot;,user);
    View view = new InternalResourceView(&quot;/view.jsp&quot;);
    ModelAndView modelAndView = new ModelAndView(view,map);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView7&quot;)
public ModelAndView modelAndView7()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    ModelAndView modelAndView = new ModelAndView(&quot;view&quot;,&quot;user&quot;,user);
    return modelAndView;
&#125;

@RequestMapping(&quot;/modelAndView8&quot;)
public ModelAndView modelAndView8()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    View view = new InternalResourceView(&quot;/view.jsp&quot;);
    ModelAndView modelAndView = new ModelAndView(view,&quot;user&quot;,user);
    return modelAndView;
&#125;
</code></pre>
<p>4、HttpServletRequest</p>
<pre><code class="lang-java">@RequestMapping(&quot;/request&quot;)
public String request(HttpServletRequest request)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    request.setAttribute(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;
</code></pre>
<p>5、@ModelAttribute</p>
<ul>
<li>定义一个方法，该方法专门用来返回要填充到模型数据中的对象。</li>
</ul>
<pre><code class="lang-java">@ModelAttribute
public User getUser()&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    return user;
&#125;
</code></pre>
<pre><code class="lang-java">@ModelAttribute
public void getUser(Map&lt;String,User&gt; map)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    map.put(&quot;user&quot;,user);
&#125;
</code></pre>
<pre><code class="lang-java">@ModelAttribute
public void getUser(Model model)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    model.addAttribute(&quot;user&quot;,user);
&#125;
</code></pre>
<ul>
<li>业务方法中无需再处理模型数据，只需返回视图即可。</li>
</ul>
<pre><code class="lang-java">@RequestMapping(&quot;/modelAttribute&quot;)
public String modelAttribute()&#123;
    return &quot;view&quot;;
&#125;
</code></pre>
<blockquote>
<p>将模型数据绑定到 session 对象</p>
</blockquote>
<p>1、直接使用原生的 Servlet API。</p>
<pre><code class="lang-java">@RequestMapping(&quot;/session&quot;)
public String session(HttpServletRequest request)&#123;
    HttpSession session = request.getSession();
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    session.setAttribute(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;

@RequestMapping(&quot;/session2&quot;)
public String session2(HttpSession session)&#123;
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    session.setAttribute(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;
</code></pre>
<p>2、@SessionAttribute</p>
<pre><code class="lang-java">@SessionAttributes(value = &#123;&quot;user&quot;,&quot;address&quot;&#125;)
public class ViewHandler &#123;
&#125;
</code></pre>
<p>对于 ViewHandler 中的所有业务方法，只要向 request 中添加了 key = “user”、key = “address” 的对象时，Spring MVC 会自动将该数据添加到 session 中，保存 key 不变。</p>
<pre><code class="lang-java">@SessionAttributes(types = &#123;User.class,Address.class&#125;)
public class ViewHandler &#123;
&#125;
</code></pre>
<p>对于 ViewHandler 中的所有业务方法，只要向 request 中添加了数据类型是 User 、Address 的对象时，Spring MVC 会自动将该数据添加到 session 中，保存 key 不变。</p>
<blockquote>
<p>将模型数据绑定到 application 对象</p>
</blockquote>
<pre><code class="lang-java">@RequestMapping(&quot;/application&quot;)
public String application(HttpServletRequest request)&#123;
    ServletContext application = request.getServletContext();
    User user = new User();
    user.setId(1L);
    user.setName(&quot;张三&quot;);
    application.setAttribute(&quot;user&quot;,user);
    return &quot;view&quot;;
&#125;
</code></pre>
<h3 id="Spring-MVC-自定义数据转换器"><a href="#Spring-MVC-自定义数据转换器" class="headerlink" title="Spring MVC 自定义数据转换器"></a>Spring MVC 自定义数据转换器</h3><p>数据转换器是指将客户端 HTTP 请求中的参数转换为业务方法中定义的形参，自定义表示开发者可以自主设计转换的方式，HandlerApdter 已经提供了通用的转换，String 转 int，String 转 double，表单数据的封装等，但是在特殊的业务场景下，HandlerAdapter 无法进行转换，就需要开发者自定义转换器。</p>
<p>客户端输入 String 类型的数据 “2019-03-03”，自定义转换器将该数据转为 Date 类型的对象。</p>
<ul>
<li>创建 DateConverter 转换器，实现 Conveter 接口。</li>
</ul>
<pre><code class="lang-java">package com.southwind.converter;

import org.springframework.core.convert.converter.Converter;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateConverter implements Converter&lt;String, Date&gt; &#123;

    private String pattern;

    public DateConverter(String pattern)&#123;
        this.pattern = pattern;
    &#125;

    @Override
    public Date convert(String s) &#123;
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(this.pattern);
        Date date = null;
        try &#123;
            date = simpleDateFormat.parse(s);
        &#125; catch (ParseException e) &#123;
            e.printStackTrace();
        &#125;
        return date;
    &#125;
&#125;
</code></pre>
<ul>
<li>springmvc.xml 配置转换器。</li>
</ul>
<pre><code class="lang-xml">&lt;!-- 配置自定义转换器 --&gt;
&lt;bean id=&quot;conversionService&quot; class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;list&gt;
            &lt;bean class=&quot;com.southwind.converter.DateConverter&quot;&gt;
                &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;yyyy-MM-dd&quot;&gt;&lt;/constructor-arg&gt;
            &lt;/bean&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;mvc:annotation-driven conversion-service=&quot;conversionService&quot;&gt;
    &lt;!-- 消息转换器 --&gt;
    &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;
        &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;
            &lt;property name=&quot;supportedMediaTypes&quot; value=&quot;text/html;charset=UTF-8&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 配置fastjson --&gt;
        &lt;bean class=&quot;com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:message-converters&gt;
&lt;/mvc:annotation-driven&gt;
</code></pre>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 14:47
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/converter/date&quot; method=&quot;post&quot;&gt;
        请输入日期:&lt;input type=&quot;text&quot; name=&quot;date&quot;/&gt;(yyyy-MM-dd)&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>Handler</li>
</ul>
<pre><code class="lang-java">package com.southwind.controller;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.Date;

@RestController
@RequestMapping(&quot;/converter&quot;)
public class ConverterHandler &#123;

    @RequestMapping(&quot;/date&quot;)
    public String date(Date date)&#123;
        return date.toString();
    &#125;
&#125;
</code></pre>
<p>String 转 Student</p>
<p>StudentConverter</p>
<pre><code class="lang-java">package com.southwind.converter;

import com.southwind.entity.Student;
import org.springframework.core.convert.converter.Converter;

public class StudentConverter implements Converter&lt;String, Student&gt; &#123;
    @Override
    public Student convert(String s) &#123;
        String[] args = s.split(&quot;-&quot;);
        Student student = new Student();
        student.setId(Long.parseLong(args[0]));
        student.setName(args[1]);
        student.setAge(Integer.parseInt(args[2]));
        return student;
    &#125;
&#125;
</code></pre>
<p>springmvc.xml</p>
<pre><code class="lang-xml">&lt;!-- 配置自定义转换器 --&gt;
&lt;bean id=&quot;conversionService&quot; class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;list&gt;
            &lt;bean class=&quot;com.southwind.converter.DateConverter&quot;&gt;
                &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;yyyy-MM-dd&quot;&gt;&lt;/constructor-arg&gt;
            &lt;/bean&gt;
            &lt;bean class=&quot;com.southwind.converter.StudentConverter&quot;&gt;&lt;/bean&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;mvc:annotation-driven conversion-service=&quot;conversionService&quot;&gt;
    &lt;!-- 消息转换器 --&gt;
    &lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;
        &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;
            &lt;property name=&quot;supportedMediaTypes&quot; value=&quot;text/html;charset=UTF-8&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!-- 配置fastjson --&gt;
        &lt;bean class=&quot;com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:message-converters&gt;
&lt;/mvc:annotation-driven&gt;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-14
  Time: 15:23
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/converter/student&quot; method=&quot;post&quot;&gt;
        请输入学生信息：&lt;input type=&quot;text&quot; name=&quot;student&quot;/&gt;(id-name-age)&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Handler</p>
<pre><code class="lang-java">@RequestMapping(&quot;/student&quot;)
public String student(Student student)&#123;
    return student.toString();
&#125;
</code></pre>
<h3 id="Spring-MVC-REST"><a href="#Spring-MVC-REST" class="headerlink" title="Spring MVC REST"></a>Spring MVC REST</h3><p>REST：Representational State Transfer，资源表现层状态转换，是目前比较主流的一种互联网软件架构，它结构清晰、标准规范、易于理解、便于扩展。</p>
<ul>
<li>资源（Resource）</li>
</ul>
<p>网络上的一个实体，或者说网络中存在的一个具体信息，一段文本、一张图片、一首歌曲、一段视频等等，总之就是一个具体的存在。可以用一个 URI（统一资源定位符）指向它，每个资源都有对应的一个特定的 URI，要获取该资源时，只需要访问对应的 URI 即可。</p>
<ul>
<li>表现层（Representation）</li>
</ul>
<p>资源具体<strong>呈现出来的形式</strong>，比如文本可以用 txt 格式表示，也可以用 HTML、XML、JSON等格式来表示。</p>
<ul>
<li>状态转换（State Transfer）</li>
</ul>
<p>客户端如果希望操作服务器中的某个资源，就需要通过某种方式让服务端发生状态转换，而这种转换是建立在表现层之上的，所有叫做”表现层状态转换”。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>URL 更加简洁。</li>
<li>有利于不同系统之间的资源共享，只需要遵守一定的规范，不需要进行其他配置即可实现资源共享。</li>
</ul>
<h4 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h4><p>REST 具体操作就是 HTTP 协议中四个表示操作方式的动词分别对应 CRUD 基本操作。</p>
<p>GET 用来表示获取资源。</p>
<p>POST 用来表示新建资源。</p>
<p>PUT 用来表示修改资源。</p>
<p>DELETE 用来表示删除资源。</p>
<p>Handler</p>
<pre><code class="lang-java">package com.southwind.controller;

import com.southwind.entity.Student;
import com.southwind.entity.User;
import com.southwind.repository.StudentRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.web.bind.annotation.*;

import javax.servlet.http.HttpServletResponse;
import java.util.Collection;

@RestController
@RequestMapping(&quot;/rest&quot;)
public class RESTHandeler &#123;

    @Autowired
    private StudentRepository studentRepository;

    @GetMapping(&quot;/findAll&quot;)
    public Collection&lt;Student&gt; findAll(HttpServletResponse response)&#123;
        response.setContentType(&quot;text/json;charset=UTF-8&quot;);
        return studentRepository.findAll();
    &#125;

    @GetMapping(&quot;/findById/&#123;id&#125;&quot;)
    public Student findById(@PathVariable(&quot;id&quot;) long id)&#123;
        return studentRepository.findById(id);
    &#125;

    @PostMapping(&quot;/save&quot;)
    public void save(@RequestBody Student student)&#123;
        studentRepository.saveOrUpdate(student);
    &#125;

    @PutMapping(&quot;/update&quot;)
    public void update(@RequestBody Student student)&#123;
        studentRepository.saveOrUpdate(student);
    &#125;

    @DeleteMapping(&quot;/deleteById/&#123;id&#125;&quot;)
    public void deleteById(@PathVariable(&quot;id&quot;) long id)&#123;
        studentRepository.deleteById(id);
    &#125;

&#125;
</code></pre>
<p>StudentRepository</p>
<pre><code class="lang-java">package com.southwind.repository;

import com.southwind.entity.Student;

import java.util.Collection;

public interface StudentRepository &#123;
    public Collection&lt;Student&gt; findAll();
    public Student findById(long id);
    public void saveOrUpdate(Student student);
    public void deleteById(long id);
&#125;
</code></pre>
<p>StudentRepositoryImpl</p>
<pre><code class="lang-java">package com.southwind.repository.impl;

import com.southwind.entity.Student;
import com.southwind.repository.StudentRepository;
import org.springframework.stereotype.Repository;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

@Repository
public class StudentRepositoryImpl implements StudentRepository &#123;

    private static Map&lt;Long,Student&gt; studentMap;

    static&#123;
        studentMap = new HashMap&lt;&gt;();
        studentMap.put(1L,new Student(1L,&quot;张三&quot;,22));
        studentMap.put(2L,new Student(2L,&quot;李四&quot;,23));
        studentMap.put(3L,new Student(3L,&quot;王五&quot;,24));
    &#125;

    @Override
    public Collection&lt;Student&gt; findAll() &#123;
        return studentMap.values();
    &#125;

    @Override
    public Student findById(long id) &#123;
        return studentMap.get(id);
    &#125;

    @Override
    public void saveOrUpdate(Student student) &#123;
        studentMap.put(student.getId(),student);
    &#125;

    @Override
    public void deleteById(long id) &#123;
        studentMap.remove(id);
    &#125;
&#125;
</code></pre>
<h3 id="Spring-MVC-文件上传下载"><a href="#Spring-MVC-文件上传下载" class="headerlink" title="Spring MVC 文件上传下载"></a>Spring MVC 文件上传下载</h3><blockquote>
<p>单文件上传</p>
</blockquote>
<p>底层是使用 Apache fileupload 组件完成上传，Spring MVC 对这种方式进行了封装。</p>
<ul>
<li>pom.xml</li>
</ul>
<pre><code class="lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;commons-io&lt;/groupId&gt;
    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
    &lt;version&gt;2.5&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
    &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
    &lt;version&gt;1.3.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-15
  Time: 09:09
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/file/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;input type=&quot;file&quot; name=&quot;img&quot;/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;
    &lt;/form&gt;
    &lt;img src=&quot;$&#123;path&#125;&quot;&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>1、input 的 type 设置为 file。</strong></p>
<p><strong>2、form 的 method 设置为 post（get 请求只能将文件名传给服务器）</strong></p>
<p><strong>3、from 的 enctype 设置为 multipart-form-data（如果不设置只能将文件名传给服务器）</strong></p>
<ul>
<li>Handler</li>
</ul>
<pre><code class="lang-java">package com.southwind.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpServletRequest;
import java.io.File;
import java.io.IOException;

@Controller
@RequestMapping(&quot;/file&quot;)
public class FileHandler &#123;

    @PostMapping(&quot;/upload&quot;)
    public String upload(MultipartFile img, HttpServletRequest request)&#123;
        if(img.getSize()&gt;0)&#123;
            //获取保存上传文件的file路径
            String path = request.getServletContext().getRealPath(&quot;file&quot;);
            //获取上传的文件名
            String name = img.getOriginalFilename();
            File file = new File(path,name);
            try &#123;
                img.transferTo(file);
                //保存上传之后的文件路径
                request.setAttribute(&quot;path&quot;,&quot;/file/&quot;+name);
            &#125; catch (IOException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        return &quot;upload&quot;;
    &#125;
&#125;
</code></pre>
<ul>
<li>springmvc.xml</li>
</ul>
<pre><code class="lang-xml">&lt;!-- 配置上传组件 --&gt;
&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;&lt;/bean&gt;
</code></pre>
<ul>
<li>web.xml 添加如下配置，否则客户端无法访问 png</li>
</ul>
<pre><code class="lang-xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>
<blockquote>
<p>多文件上传</p>
</blockquote>
<p>pom.xml</p>
<pre><code class="lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;jstl&lt;/groupId&gt;
    &lt;artifactId&gt;jstl&lt;/artifactId&gt;
    &lt;version&gt;1.2&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;taglibs&lt;/groupId&gt;
    &lt;artifactId&gt;standard&lt;/artifactId&gt;
    &lt;version&gt;1.1.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>JSP</p>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-15
  Time: 09:32
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;/file/uploads&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        file1:&lt;input type=&quot;file&quot; name=&quot;imgs&quot;/&gt;&lt;br/&gt;
        file2:&lt;input type=&quot;file&quot; name=&quot;imgs&quot;/&gt;&lt;br/&gt;
        file3:&lt;input type=&quot;file&quot; name=&quot;imgs&quot;&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;
    &lt;/form&gt;
    &lt;c:forEach items=&quot;$&#123;files&#125;&quot; var=&quot;file&quot; &gt;
        &lt;img src=&quot;$&#123;file&#125;&quot; width=&quot;300px&quot;&gt;
    &lt;/c:forEach&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Handler</p>
<pre><code class="lang-java">@PostMapping(&quot;/uploads&quot;)
public String uploads(MultipartFile[] imgs,HttpServletRequest request)&#123;
    List&lt;String&gt; files = new ArrayList&lt;&gt;();
    for (MultipartFile img:imgs)&#123;
        if(img.getSize()&gt;0)&#123;
            //获取保存上传文件的file路径
            String path = request.getServletContext().getRealPath(&quot;file&quot;);
            //获取上传的文件名
            String name = img.getOriginalFilename();
            File file = new File(path,name);
            try &#123;
                img.transferTo(file);
                //保存上传之后的文件路径
                files.add(&quot;/file/&quot;+name);
            &#125; catch (IOException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
    &#125;
    request.setAttribute(&quot;files&quot;,files);
    return &quot;uploads&quot;;
&#125;
</code></pre>
<blockquote>
<p>下载</p>
</blockquote>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-15
  Time: 10:36
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;a href=&quot;/file/download/1&quot;&gt;1.png&lt;/a&gt;
    &lt;a href=&quot;/file/download/2&quot;&gt;2.png&lt;/a&gt;
    &lt;a href=&quot;/file/download/3&quot;&gt;3.png&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>Handler</li>
</ul>
<pre><code class="lang-java">@GetMapping(&quot;/download/&#123;name&#125;&quot;)
public void download(@PathVariable(&quot;name&quot;) String name, HttpServletRequest request, HttpServletResponse response)&#123;
    if(name != null)&#123;
        name += &quot;.png&quot;;
        String path = request.getServletContext().getRealPath(&quot;file&quot;);
        File file = new File(path,name);
        OutputStream outputStream = null;
        if(file.exists())&#123;
            response.setContentType(&quot;application/forc-download&quot;);
            response.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+name);
            try &#123;
                outputStream = response.getOutputStream();
                outputStream.write(FileUtils.readFileToByteArray(file));
                outputStream.flush();
            &#125; catch (IOException e) &#123;
                e.printStackTrace();
            &#125; finally &#123;
                if(outputStream != null)&#123;
                    try &#123;
                        outputStream.close();
                    &#125; catch (IOException e) &#123;
                        e.printStackTrace();
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<h3 id="Spring-MVC-表单标签库"><a href="#Spring-MVC-表单标签库" class="headerlink" title="Spring MVC 表单标签库"></a>Spring MVC 表单标签库</h3><ul>
<li>Handler</li>
</ul>
<pre><code class="lang-java">@GetMapping(&quot;/get&quot;)
public ModelAndView get()&#123;
    ModelAndView modelAndView = new ModelAndView(&quot;tag&quot;);
    Student student = new Student(1L,&quot;张三&quot;,22);
    modelAndView.addObject(&quot;student&quot;,student);
    return modelAndView;
&#125;
</code></pre>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-15
  Time: 10:53
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;学生信息&lt;/h1&gt;
    &lt;form:form modelAttribute=&quot;student&quot;&gt;
        学生ID：&lt;form:input path=&quot;id&quot;/&gt;&lt;br/&gt;
        学生姓名：&lt;form:input path=&quot;name&quot;/&gt;&lt;br/&gt;
        学生年龄：&lt;form:input path=&quot;age&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>1、JSP 页面导入 Spring MVC 表单标签库，与导入 JSTL 标签库的语法非常相似，前缀 prefix 可以自定义，通常定义为 from。</p>
<pre><code class="lang-jsp">&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;
</code></pre>
<p>2、将 form 表单与模型数据进行绑定，通过 modelAttribute 属性完成绑定，将 modelAttribute 的值设置为模型数据对应的 key 值。</p>
<pre><code class="lang-java">Handeler:modelAndView.addObject(&quot;student&quot;,student);
JSP:&lt;form:form modelAttribute=&quot;student&quot;&gt;
</code></pre>
<p>3、form 表单完成绑定之后，将模型数据的值取出绑定到不同的标签中，通过设置标签的 path 属性完成，将 path 属性的值设置为模型数据对应的属性名即可。</p>
<pre><code class="lang-jsp">学生ID：&lt;form:input path=&quot;id&quot;/&gt;&lt;br/&gt;
学生姓名：&lt;form:input path=&quot;name&quot;/&gt;&lt;br/&gt;
学生年龄：&lt;form:input path=&quot;age&quot;/&gt;&lt;br/&gt;
</code></pre>
<h4 id="常用的表单标签"><a href="#常用的表单标签" class="headerlink" title="常用的表单标签"></a>常用的表单标签</h4><ul>
<li>from</li>
</ul>
<pre><code class="lang-jsp">&lt;form:from modelAttribute=&quot;student&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的<code>&lt;form&gt;&lt;/from&gt;</code>，通过 modelAttribute 属性绑定具体的模型数据。</p>
<ul>
<li>input</li>
</ul>
<pre><code class="lang-jsp">&lt;form:input path=&quot;name&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的 <code>&lt;input type=&quot;text&quot;/&gt;</code>，from 标签绑定的是模型数据，input 标签绑定的是模型数据中的属性值，通过 path 属性可以与模型数据中的属性名对应，并且支持及联操作。</p>
<pre><code class="lang-jsp">&lt;from:input path=&quot;address.name&quot;/&gt;
</code></pre>
<ul>
<li>password</li>
</ul>
<pre><code class="lang-jsp">&lt;form:password path=&quot;password&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的 <code>&lt;input type=&quot;password&quot;/&gt;</code>，通过 path 属性与模型数据的属性值进行绑定，password 标签的值不会在页面显示。</p>
<ul>
<li>checkbox</li>
</ul>
<pre><code class="lang-jsp">&lt;form:checkbox path=&quot;hobby&quot; value=&quot;读书&quot;/&gt;
</code></pre>
<pre><code class="lang-java">student.setFlag(false);
</code></pre>
<pre><code class="lang-jsp">checkbox：&lt;form:checkbox path=&quot;flag&quot; value=&quot;flag&quot;&gt;&lt;/form:checkbox&gt;&lt;br/&gt;
</code></pre>
<p>渲染的是 HTML 中的 <code>&lt;input type=&quot;checkbox&quot;/&gt;</code>，通过 path 与模型数据的属性值进行绑定，可以绑定 boolean、数组和集合。</p>
<p>如果绑定 boolean 值，若该变量的值为 true，则表示该复选框选中，否则表示不选中。</p>
<p>如果绑定数组或者集合，数组/集合中的元素等于 checkbox 的 value 值，则选中。</p>
<pre><code class="lang-java">student.setHobby(Arrays.asList(&quot;读书&quot;,&quot;看电影&quot;,&quot;玩游戏&quot;));
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">爱好：&lt;form:checkbox path=&quot;hobby&quot; value=&quot;摄影&quot;&gt;&lt;/form:checkbox&gt;摄影&lt;br/&gt;
&lt;form:checkbox path=&quot;hobby&quot; value=&quot;读书&quot;&gt;&lt;/form:checkbox&gt;读书&lt;br/&gt;
&lt;form:checkbox path=&quot;hobby&quot; value=&quot;听音乐&quot;&gt;&lt;/form:checkbox&gt;听音乐&lt;br/&gt;
&lt;form:checkbox path=&quot;hobby&quot; value=&quot;看电影&quot;&gt;&lt;/form:checkbox&gt;看电影&lt;br/&gt;
&lt;form:checkbox path=&quot;hobby&quot; value=&quot;旅游&quot;&gt;&lt;/form:checkbox&gt;旅游&lt;br/&gt;
&lt;form:checkbox path=&quot;hobby&quot; value=&quot;玩游戏&quot;&gt;&lt;/form:checkbox&gt;玩游戏&lt;br/&gt;
&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
</code></pre>
<ul>
<li>checkboxes</li>
</ul>
<pre><code class="lang-jsp">&lt;form:checkboxes items=$&#123;student.hobby&#125; path=&quot;selecHobby&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的一组 <code>&lt;input type=&quot;checkbox&quot;/&gt;</code>，是对 <code>&lt;form:checkbox/&gt;</code> 的一种简化，需要结合 items 和 path 属性来使用，items 绑定被遍历的集合或数组，path 绑定被选中的集合或数组，可以这样理解，items 为全部可选集合，path 为默认的选中集合。</p>
<pre><code class="lang-java">class Student&#123;
    List&lt;String&gt; Hobby;
    List&lt;String&gt; selectHobby;
&#125;

student.setHobby(Arrays.asList(&quot;摄影&quot;,&quot;读书&quot;,&quot;听音乐&quot;,&quot;看电影&quot;,&quot;旅游&quot;,&quot;玩游戏&quot;));
student.setSelectHobby(Arrays.asList(&quot;摄影&quot;,&quot;读书&quot;,&quot;听音乐&quot;));
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">爱好：&lt;form:checkboxes path=&quot;selectHobby&quot; items=&quot;$&#123;student.hobby&#125;&quot;/&gt;&lt;br/&gt;
</code></pre>
<p>需要注意的是 <strong>path 可以直接绑定模型数据的属性值</strong>，</p>
<p><strong>items 则需要通过 EL 表达式</strong>的形式从域对象中获取数据，不能直接写属性名。</p>
<ul>
<li>rabiobutton  单选框</li>
</ul>
<pre><code class="lang-jsp">&lt;from:radiobutton path=&quot;radioId&quot; value=&quot;0&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的一个 <code>&lt;input type=&quot;radio&quot;/&gt;</code>，绑定的数据与标签的 value 值相等则为选中，否则不选中。</p>
<pre><code class="lang-java">student.setRadioId(1);
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">radiobutton:&lt;form:radiobutton path=&quot;radioId&quot; value=&quot;1&quot;/&gt;radiobutton&lt;br/&gt;
</code></pre>
<ul>
<li>radiobuttons</li>
</ul>
<pre><code class="lang-jsp">&lt;form:radiobuttons itmes=&quot;$&#123;student.grade&#125;&quot; path=&quot;selectGrade&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的一组 <code>&lt;input type=&quot;radio&quot;/&gt;</code>，这里需要集合 items 和 path 两个属性来使用，items 绑定被遍历的集合或数组，path 绑定被选中的值，items 为全部的可选类型，path 为默认选中的选项，用法与 <code>&lt;form:checkboxes/&gt;</code> 一致。</p>
<pre><code class="lang-java">Map&lt;Integer,String&gt; gradeMap = new HashMap&lt;&gt;();
gradeMap.put(1,&quot;一年级&quot;);
gradeMap.put(2,&quot;二年级&quot;);
gradeMap.put(3,&quot;三年级&quot;);
gradeMap.put(4,&quot;四年级&quot;);
gradeMap.put(5,&quot;五年级&quot;);
gradeMap.put(6,&quot;六年级&quot;);
student.setGradeMap(gradeMap);
student.setSelectGrade(3);
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">学生年级：&lt;form:radiobuttons items=&quot;$&#123;student.gradeMap&#125;&quot; path=&quot;selectGrade&quot;/&gt;&lt;br/&gt;
</code></pre>
<ul>
<li>select</li>
</ul>
<pre><code class="lang-jsp">&lt;form:select items=&quot;$&#123;student.citys&#125;&quot; path=&quot;selectCity&quot;/&gt;
</code></pre>
<p>渲染的是 HTML 中的一个 <code>&lt;select/&gt;</code> 标签，</p>
<p>需要结合 items 和 path 两个属性来使用，</p>
<p>items 绑定被遍历的集合或数组，</p>
<p>path 绑定被选中的值，用法与 <code>&lt;from:radiobuttons/&gt;</code>一致。</p>
<pre><code class="lang-java">Map&lt;Integer,String&gt; cityMap = new HashMap&lt;&gt;();
cityMap.put(1,&quot;北京&quot;);
cityMap.put(2,&quot;上海&quot;);
cityMap.put(3,&quot;广州&quot;);
cityMap.put(4,&quot;深圳&quot;);
student.setCityMap(cityMap);
student.setSelectCity(3);
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">所在城市：&lt;form:select items=&quot;$&#123;student.cityMap&#125;&quot; path=&quot;selectCity&quot;&gt;&lt;/form:select&gt;&lt;br/&gt;
</code></pre>
<ul>
<li>options</li>
</ul>
<p><code>form:select</code> 结合 <code>form:options</code> 的使用，<code>from:select</code> 只定义 path 属性，在 <code>form:select</code> 标签内部添加一个子标签 <code>form:options</code> ，设置 items 属性，获取被遍历的集合。</p>
<pre><code class="lang-jsp">所在城市：&lt;form:select path=&quot;selectCity&quot;&gt;
                  &lt;form:options items=&quot;$&#123;student.cityMap&#125;&quot;&gt;&lt;/form:options&gt;
                &lt;/form:select&gt;&lt;br/&gt;
</code></pre>
<ul>
<li><p>option</p>
<p><code>form:select</code> 结合 <code>form:option</code> 的使用，<code>from:select</code> 定义 path 属性，给每一个 <code>form:option</code> 设置 value 值，path 的值与哪个 value 值相等，该项默认选中。</p>
</li>
</ul>
<pre><code class="lang-jsp">所在城市：&lt;form:select path=&quot;selectCity&quot;&gt;
            &lt;form:option value=&quot;1&quot;&gt;杭州&lt;/form:option&gt;
            &lt;form:option value=&quot;2&quot;&gt;成都&lt;/form:option&gt;
            &lt;form:option value=&quot;3&quot;&gt;西安&lt;/form:option&gt;
        &lt;/form:select&gt;&lt;br/&gt;
</code></pre>
<ul>
<li>textarea</li>
</ul>
<p>渲染的是 HTML 中的一个 <code>&lt;textarea/&gt;</code> ，path 绑定模型数据的属性值，作为文本输入域的默认值。</p>
<pre><code class="lang-java">student.setIntroduce(&quot;你好，我是...&quot;);
modelAndView.addObject(&quot;student&quot;,student);
</code></pre>
<pre><code class="lang-jsp">信息：&lt;form:textarea path=&quot;introduce&quot;/&gt;&lt;br/&gt;
</code></pre>
<ul>
<li>errors</li>
</ul>
<p>处理错误信息，一般用在数据校验，该标签需要结合 Spring MVC 的<strong>验证器</strong>结合起来使用。</p>
<h3 id="Spring-MVC-数据校验"><a href="#Spring-MVC-数据校验" class="headerlink" title="Spring MVC 数据校验"></a>Spring MVC 数据校验</h3><p>Spring MVC 提供了两种数据校验的方式：1、基于 Validator 接口。2、使用 Annotation JSR - 303 标准进行校验。</p>
<p>基于 Validator 接口的方式需要自定义 Validator 验证器，每一条数据的验证规则需要开发者手动完成，使用 Annotation JSR - 303 标准则不需要自定义验证器，通过注解的方式可以直接在实体类中添加每个属性的验证规则，这种方式更加方便，实际开发中推荐使用。</p>
<blockquote>
<p>基于 Validator 接口</p>
</blockquote>
<ul>
<li>实体类 Account</li>
</ul>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;

@Data
public class Account &#123;
    private String name;
    private String password;
&#125;
</code></pre>
<ul>
<li>自定义验证器 AccountValidator，实现 Validator 接口。</li>
</ul>
<pre><code class="lang-java">package com.southwind.validator;

import com.southwind.entity.Account;
import org.springframework.validation.Errors;
import org.springframework.validation.ValidationUtils;
import org.springframework.validation.Validator;

public class AccountValidator implements Validator &#123;

    //确定是否需要验证
    @Override
    public boolean supports(Class&lt;?&gt; aClass) &#123;
        return Account.class.equals(aClass);
    &#125;

    //进行数据校验
    @Override
    public void validate(Object o, Errors errors) &#123;
        //Errors存储错误信息，
        ValidationUtils.rejectIfEmpty(errors,&quot;name&quot;,null,&quot;姓名不能为空&quot;);
        ValidationUtils.rejectIfEmpty(errors,&quot;password&quot;,null,&quot;密码不能为空&quot;);
    &#125;
&#125;
</code></pre>
<ul>
<li>控制器</li>
</ul>
<pre><code class="lang-java">package com.southwind.controller;

import com.southwind.entity.Account;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping(&quot;/validator&quot;)
public class ValidatorHandler &#123;

    //绑定前端数据
    @GetMapping(&quot;/login&quot;)
    public String login(Model model)&#123;
        model.addAttribute(&quot;account&quot;,new Account());
        return &quot;login&quot;;
    &#125;

    @PostMapping(&quot;/login&quot;)
    //添加注解自动绑定验证 绑定结果集
    public String login(@Validated Account account, BindingResult bindingResult)&#123;
        if(bindingResult.hasErrors())&#123;
            return &quot;login&quot;;
        &#125;
        return &quot;index&quot;;
    &#125;
&#125;
</code></pre>
<ul>
<li>springmvc.xml 配置验证器。</li>
</ul>
<pre><code class="lang-xml">&lt;bean id=&quot;accountValidator&quot; class=&quot;com.southwind.validator.AccountValidator&quot;&gt;&lt;/bean&gt;
&lt;mvc:annotation-driven validator=&quot;accountValidator&quot;&gt;&lt;/mvc:annotation-driven&gt;
</code></pre>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-18
  Time: 10:31
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;
&lt;%@ taglib prefix=&quot;from&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form:form modelAttribute=&quot;account&quot; action=&quot;/validator/login&quot; method=&quot;post&quot;&gt;
        姓名：&lt;form:input path=&quot;name&quot;/&gt;&lt;from:errors path=&quot;name&quot;&gt;&lt;/from:errors&gt;&lt;br/&gt;
        密码：&lt;form:input path=&quot;password&quot;/&gt;&lt;from:errors path=&quot;password&quot;&gt;&lt;/from:errors&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;登录&quot;/&gt;
    &lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<blockquote>
<p>Annotation JSR - 303 标准</p>
</blockquote>
<p>使用 Annotation JSR - 303 标准进行验证，需要导入支持这种标准的依赖 jar 文件，这里我们使用 Hibernate Validator。</p>
<ul>
<li>pom.xml</li>
</ul>
<pre><code class="lang-xml">&lt;!-- JSR-303 --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
  &lt;version&gt;5.3.6.Final&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;javax.validation&lt;/groupId&gt;
  &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
  &lt;version&gt;2.0.1.Final&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;
  &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;
  &lt;version&gt;3.3.2.Final&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>通过注解的方式直接在实体类中添加相关的验证规则。</li>
</ul>
<pre><code class="lang-java">package com.southwind.entity;

import lombok.Data;
import org.hibernate.validator.constraints.Email;
import org.hibernate.validator.constraints.NotEmpty;
import javax.validation.constraints.Pattern;
import javax.validation.constraints.Size;

@Data
public class Person &#123;
    @NotEmpty(message = &quot;用户名不能为空&quot;)
    private String username;
    @Size(min = 6,max = 12,message = &quot;密码6-12位&quot;)
    private String password;
    @Email(regexp = &quot;^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\\\.[a-zA-Z0-9-]+)*\\\\.[a-zA-Z0-9]&#123;2,6&#125;$&quot;,message = &quot;请输入正确的邮箱格mr式&quot;)
    private String email;
    @Pattern(regexp = &quot;^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\\\\\\\d&#123;8&#125;$&quot;,message = &quot;请输入正确的电话&quot;)
    private String phone;
&#125;
</code></pre>
<ul>
<li>ValidatorHandler</li>
</ul>
<pre><code class="lang-java">@GetMapping(&quot;/register&quot;)
public String register(Model model)&#123;
    model.addAttribute(&quot;person&quot;,new Person());
    return &quot;register&quot;;
&#125;

@PostMapping(&quot;/register&quot;)
public String register(@Valid Person person, BindingResult bindingResult)&#123;
    if(bindingResult.hasErrors())&#123;
        return &quot;register&quot;;
    &#125;
    return &quot;index&quot;;
&#125;
</code></pre>
<ul>
<li>springmvc.xml</li>
</ul>
<pre><code class="lang-xml">&lt;mvc:annotation-driven /&gt;
</code></pre>
<ul>
<li>JSP</li>
</ul>
<pre><code class="lang-jsp">&lt;%--
  Created by IntelliJ IDEA.
  User: southwind
  Date: 2019-03-18
  Time: 11:29
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form:form modelAttribute=&quot;person&quot; action=&quot;/validator/register2&quot; method=&quot;post&quot;&gt;
        用户名：&lt;form:input path=&quot;username&quot;&gt;&lt;/form:input&gt;&lt;form:errors path=&quot;username&quot;/&gt;&lt;br/&gt;
        密码：&lt;form:password path=&quot;password&quot;&gt;&lt;/form:password&gt;&lt;form:errors path=&quot;password&quot;/&gt;&lt;br/&gt;
        邮箱：&lt;form:input path=&quot;email&quot;&gt;&lt;/form:input&gt;&lt;form:errors path=&quot;email&quot;/&gt;&lt;br/&gt;
        电话：&lt;form:input path=&quot;phone&quot;&gt;&lt;/form:input&gt;&lt;form:errors path=&quot;phone&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;
    &lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>校验规则详解：</p>
<p>@Null                    被注解的元素必须为null</p>
<p>@NotNull                  被注解的元素不能为null</p>
<p>@Min(value)                 被注解的元素必须是一个数字，其值必须大于等于指定的最小值</p>
<p>@Max(value)                被注解的元素必须是一个数字，其值必须小于于等于指定的最大值    </p>
<p>@Email                     被注解的元素必须是电子邮箱地址</p>
<p>@Pattern                  被注解的元素必须符合对应的正则表达式</p>
<p>@Length                   被注解的元素的大小必须在指定的范围内</p>
<p>@NotEmpty                  被注解的字符串的值必须非空</p>
<p>Null 和 Empty 是不同的结果，String str = null，str 是 null，String str = “”，str 不是 null，其值为空。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">KawYang</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://KawYang.github.io/ae0f95e0.html">http://KawYang.github.io/ae0f95e0.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">KawYang</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Spring-MVC/">
                                    <span class="chip bg-color">Spring MVC</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'usOHr6z8rRPsvixoXLTcGY31-gzGzoHsz',
        appKey: 'xl8GJPtfGW61YDG075q2qp0D',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'monsterid',
        pageSize: '9',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/cb358a7b.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/8.jpg" class="responsive-img" alt="Json">
                        
                        <span class="card-title">Json</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-08-05
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Web/" class="post-category">
                                    Web
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java-Web/">
                        <span class="chip bg-color">Java Web</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2a48474d.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="设计模式-建造者模式">
                        
                        <span class="card-title">设计模式-建造者模式</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-07-17
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-category">
                                    设计模式
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                        <span class="chip bg-color">设计模式</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2023</span>
            
            <!-- <span id="year">2021</span> -->
            <a href="/about" target="_blank">KawYang</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            <!-- 
            
            
             -->
            
                <span id="busuanzi_container_site_pv-1">
                    |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                        class="white-color"></span>&nbsp;次
                </span>
            
            
                <span id="busuanzi_container_site_uv-1">
                    |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                        class="white-color"></span>&nbsp;人
                </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2021";
                    var startMonth = "7";
                    var startDate = "1";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/KawYang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:KawYang@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1595550476" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1595550476" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>
<script src="/js/prism/prism.js" async></script>
<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
var currPath = window.document.location.href;
var pathName = window.document.location.pathname;
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" +currPath.substring(0,currPath.indexOf(pathName)) +data_url.substring(1,data_url.length)+ "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

</body>

</html>
